<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Scoreboard Control</title>
<style>
  body {
    margin: 0;
    background: black;
    font-family: Arial, sans-serif;
    text-align: center;
    color: white;
  }

  .scoreboard-container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 180px;
    padding: 20px;
  }

  .teamA {
    background: yellow;
    color: red;
    justify-content: flex-start;
    width: 450px;
    padding-left: 50px;
    padding-right: 20px;
    margin-right: 20px;
    height: 120px;
    display: flex;
    align-items: center;
    border-radius: 10px;
    font-weight: bold;
  }

  .teamB {
    background: white;
    color: red;
    justify-content: flex-end;
    width: 450px;
    padding-left: 20px;
    padding-right: 50px;
    margin-left: 20px;
    height: 120px;
    display: flex;
    align-items: center;
    border-radius: 10px;
    font-weight: bold;
  }

  .team-name-container {
    width: 100%;
    overflow: hidden;
  }

  .team-name {
    font-size: 55px;
    white-space: nowrap;
    display: inline-block;
    padding: 20px;
  }

  .score-box {
    background: #222;
    color: white;
    border-radius: 8px;
    padding: 15px 30px;
    font-size: 50px;
    font-weight: bold;
    text-align: center;
    margin-left: 20px;
    align-self: center;
  }

  .teamB .score-box {
    margin-left: 0;
    margin-right: 20px;
  }

  .center-timer {
    font-size: 70px;
    font-weight: bold;
    width: 120px;
  }

  .controls {
    background: #222;
    padding: 15px;
    border-top: 2px solid #444;
  }

  .controls input, .controls button {
    font-size: 18px;
    margin: 5px;
    padding: 8px 15px;
  }

  .main-row {
    display: flex;
    justify-content: center;
    align-items: center;
  }

</style>
</head>
<body>

<div class="scoreboard-container main-row">
  <!-- Team A left -->
  <div class="teamA">
    <div class="team-name-container">
      <div class="team-name" id="nameA">Team A</div>
    </div>
    <div class="score-box" id="scoreA">0</div>
  </div>

  <!-- Timer center -->
  <div class="center-timer" id="timer">30</div>

  <!-- Team B right -->
  <div class="teamB">
    <div class="score-box" id="scoreB">0</div>
    <div class="team-name-container">
      <div class="team-name" id="nameB">Team B</div>
    </div>
  </div>
</div>

<div class="controls">
  <div>
    <input type="text" id="inputA" placeholder="Enter Team A Name">
    <button onclick="setName('A')">Set A</button>
    <input type="text" id="inputB" placeholder="Enter Team B Name">
    <button onclick="setName('B')">Set B</button>
  </div>
  <div>
    <button onclick="startStop()">Start/Stop</button>
    <button onclick="resetAll()">Reset All</button>
  </div>
  <div>
    <button onclick="incScore('A',1)">A +1</button>
    <button onclick="incScore('A',0.5)">A +0.5</button>
    <button onclick="decScore('A',1)">A -1</button>
    <button onclick="decScore('A',0.5)">A -0.5</button>
    <br>
    <button onclick="incScore('B',1)">B +1</button>
    <button onclick="incScore('B',0.5)">B +0.5</button>
    <button onclick="decScore('B',1)">B -1</button>
    <button onclick="decScore('B',0.5)">B -0.5</button>
  </div>
  <div style="margin-top:10px;">
    <button onclick="copyDisplayLink()">Copy Display Link</button>
  </div>
</div>

<script>
let scoreA = 0;
let scoreB = 0;
let timer = 30;
let running = false;
let interval;

function updateLocalStorage() {
  localStorage.setItem('scoreboardData', JSON.stringify({
    scoreA,
    scoreB,
    timer,
    nameA: document.getElementById("nameA").textContent,
    nameB: document.getElementById("nameB").textContent,
  }));
}

function updateScores(){
  document.getElementById("scoreA").textContent = scoreA.toFixed(1).replace(/\.0$/, "");
  document.getElementById("scoreB").textContent = scoreB.toFixed(1).replace(/\.0$/, "");
  updateLocalStorage();
}

function incScore(team, val){
  if(team=="A") scoreA += val;
  else scoreB += val;
  updateScores();
}

function decScore(team, val){
  if(team=="A" && scoreA>=val) scoreA -= val;
  else if(team=="B" && scoreB>=val) scoreB -= val;
  updateScores();
}

function updateTimer(){
  document.getElementById("timer").textContent = timer;
  updateLocalStorage();
}

function tick(){
  if(timer>0){ 
    timer--; 
    updateTimer(); 
  }
}

function startStop(){
  if(!running){
    interval = setInterval(tick,1000);
    running = true;
  } else {
    clearInterval(interval);
    running = false;
    timer = 30;
    updateTimer();
  }
}

function resetAll(){
  clearInterval(interval);
  running = false;
  timer = 30;
  scoreA = 0;
  scoreB = 0;
  document.getElementById("nameA").textContent = "Team A";
  document.getElementById("nameB").textContent = "Team B";
  document.getElementById("inputA").value = "";
  document.getElementById("inputB").value = "";
  updateScores();
  updateTimer();
  checkScrolling();
}

function setName(team){
  if(team=="A"){
    let name = document.getElementById("inputA").value;
    if(name) document.getElementById("nameA").textContent = name;
  } else {
    let name = document.getElementById("inputB").value;
    if(name) document.getElementById("nameB").textContent = name;
  }
  updateLocalStorage();
  checkScrolling();
}

function checkScrolling(){
  ['A','B'].forEach(team=>{
    const nameEl = document.getElementById('name'+team);
    const container = nameEl.parentElement;
    nameEl.classList.remove('scroll');
    if(nameEl.scrollWidth > container.clientWidth){
      nameEl.classList.add('scroll');
    }
  });
}

function copyDisplayLink(){
  // Assuming display.html in same folder as this control.html
  const url = window.location.href.replace(/[^\/]*$/, "display.html");
  navigator.clipboard.writeText(url)
    .then(() => alert("Display link copied:\n" + url))
    .catch(() => alert("Failed to copy display link."));
}

updateScores();
updateTimer();
checkScrolling();
</script>

</body>
</html>
